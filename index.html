<html>

<head>
<link rel="css/jquery-ui.css" />
<!-- Google Maps API -->
<script type="text/javascript" src="http://maps.google.com/maps/api/js?v=3&amp;sensor=false"></script>

<!-- jQuery libraries -->
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.0/jquery-ui.min.js"></script>

<!-- OpenLayers API -->
<script type="text/javascript" src="OpenLayers/OpenLayers.js"></script>

<!-- Useful libraries -->
<script type="text/javascript" src="scripts/ben-nadel-parse-csv.js"></script>
<script type="text/javascript" src="scripts/stream.js"></script>
<script type="text/javascript" src="scripts/dbf.js"</script>

<!-- Mine libraries -->
<script type="text/javascript" src="scripts/map-point-view.js"></script>
<script type="text/javascript" src="scripts/map-point-view-data.js"></script>
<script type="text/javascript" src="scripts/map-point-view-ui.js"></script>

<style>
    body { font-size: 62.5%; }
    label, input { display:block; }
    input.text { margin-bottom:12px; width:95%; padding: .4em; }
    fieldset { padding:0; border:0; margin-top:25px; }
    h1 { font-size: 1.2em; margin: .6em 0; }
    .ui-dialog .ui-state-error { padding: .3em; }
    .validateTips { border: 1px solid transparent; padding: 0.3em; }
</style>

<script type="text/javascript">
    var map;
    function init() {
        map = new OpenLayers.Map({
            div: "map",
            allOverlays: true
        });

        var osm = new OpenLayers.Layer.OSM();
        var gmap = new OpenLayers.Layer.Google("Google Streets", {visibility: false});

        map.addLayers([osm, gmap]);

        map.addControl(new OpenLayers.Control.LayerSwitcher());
        map.zoomToMaxExtent();

        MapPointView.Init(map);

        $('#select-fields-form').dialog({
            autoOpen: false,
            height: 300,
            width: 350,
            modal: true
        });
    }

</script>
</head>

<body onload="init()">

<div>
    <input type="file" id="data_file" name="data_file"/>
    <button onclick="MapPointViewUI_load_data($('#data_file').prop('files')[0], $('#select-fields-form'));">Load</button>
</div>
<div id="map"></div>

<!-- jQuery UI data -->
<div style="display: none">
    <div id="select-fields-form" title="Select fields">
        <form>
            <fieldset>
                <label for="objectid">Object id</label>
                <select id="objectid" name="objectid"></select>
                <label for="x">X</label>
                <select id="x" name="x"></select>
                <label for="y">Y</label>
                <select id="y" name="y"></select>
                <label for="value">Value</label>
                <select id="value" name="value"></select>
            </fieldset>
        </form>
    </div>
</div>
</body>

</html>
